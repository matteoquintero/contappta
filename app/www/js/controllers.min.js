angular.module("starter.controllers",[]).controller("InitCtrl",function(a){var b={controller:"http://www.contappta.com/application/controller/app/"};localStorage.setItem("app",JSON.stringify(b));
if(localStorage.getItem("user")!==null){a.go("tab.dash");}else{a.go("login");}}).controller("LoginCtrl",function(b,a,d,c){b.data={};b.login=function(){a.loginUser(b.data.username,b.data.password).success(function(e){c.go("tab.dash");
}).error(function(f){var e=d.alert({title:"Inicio fallido",template:"Por favor revisa tus credenciales"});});};}).controller("CloseCtrl",function(a){localStorage.removeItem("app");
localStorage.removeItem("events");localStorage.removeItem("user");localStorage.removeItem("devicetoken");localStorage.removeItem("institution");localStorage.clear();
a.go("init");}).controller("EventDetailCtrl",function(a,c,b){a.fechaevento=c.dateevent;b.date(c.dateevent).then(function(d){a.events=d;});}).controller("EventIdDetailCtrl",function(a,c,b){b.eventId(c.idEvent).then(function(d){a.events=d;
});}).controller("ContactsCtrl",function(a,b){b.contacts().then(function(c){a.users=c;});}).controller("DashCtrl",function(b,d,c){var a=JSON.parse(localStorage.getItem("user")||"{}");
c.get(a.idInstitucion).then(function(e){b.institution=e;localStorage.setItem("institution",JSON.stringify(e));});d.all().then(function(e){b.notices=e;});
b.user=a;}).controller("DashDetailCtrl",function(b,f,e,d,g){var a=JSON.parse(localStorage.getItem("user")||"{}");d.get(f.noticeId).then(function(h){b.notice=h;
});b.sendMessage=function(i){var h={response:b.input.message,user:a.idUsuario,nevv:f.noticeId};g.create(h).then(function(j){e.go("tab.dash");});};var c={user:a.idUsuario,nevv:f.noticeId,};
d.view(c).then();}).controller("ChatsCtrl",function(a,f,e,d,c,b){f.all().then(function(g){a.chats=g;});a.remove=function(h){var g=e.confirm({title:"Confirmar",template:"Esta seguro que desea eliminar este contenido"});
g.then(function(j){if(j){var i={conversation:h.idConversacion,};c.kill(i).then(function(k){b.go("tab.dash");});}});};}).controller("ChatDetailCtrl",function(b,f,e,h,g,d){var a=JSON.parse(localStorage.getItem("user")||"{}");
b.user=a;h.get(f.chatId).then(function(i){b.messages=i;});g.get(f.userId).then(function(i){b.userchat=i;});b.sendMessage=function(j){console.log(b);var i={message:b.input.message,transmitter:a.idUsuario,reciver:f.userId,conversation:f.chatId,institution:a.idInstitucion};
d.create(i).then(function(k){e.go("tab.chats");});};var c={reciver:a.idUsuario,conversation:f.chatId,};d.view(c).then();}).controller("Son",function(b,c,d,a){d.get(c.user).then(function(e){b.user=e;
});a.get(c.user).then(function(e){b.honors=e;});}).controller("Institute",function(a,b){var c=JSON.parse(localStorage.getItem("institution")||"{}");a.institution=c;
}).controller("DataCtrl",function(b,c){var a=JSON.parse(localStorage.getItem("user")||"{}");b.user=a;var d=JSON.parse(localStorage.getItem("institution")||"{}");
b.institution=d;}).controller("AccountCtrl",function(b,f,d,c){c.calender();f.all().then(function(g){b.sons=g;});var a=JSON.parse(localStorage.getItem("user")||"{}");
b.user=a;var e=JSON.parse(localStorage.getItem("institution")||"{}");b.institution=e;}).controller("DateCtrl",function(k,a,f,l){Array.prototype.containsdate=function(n){var m=this.length;
while(m--){if(this[m]["date"].toString()===n.toString()){return true;}}return false;};var d=new Date();var b=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
var j=["Do","Lu","Ma","Mi","Ju","Vi","Sa"];var c=new Date(2015,1,26);var g=new Date(2024,1,26);var h=[];var l=JSON.parse(localStorage.getItem("events"));
for(var e=0;e<l.length;e++){h.push({date:new Date(l[e].date)});}k.onezoneDatepicker={date:d,mondayFirst:true,months:b,daysOfTheWeek:j,startDate:c,endDate:g,disablePastDays:false,disableSwipe:false,disableWeekend:false,showDatepicker:false,showTodayButton:true,calendarMode:true,hideCancelButton:false,hideSetButton:false,highlights:h,callback:function(m){if(h.containsdate(m)){var i=((m.getFullYear())+"-"+(m.getMonth()+1)+"-"+m.getDate());
a.go("tab.event-detail",{dateevent:i},{inherit:false});}}};}).controller("MagazineCtrl",["$scope","$ionicModal","$ionicSlideBoxDelegate","magazines",function(b,a,d,c){c.all().then(function(e){b.magazines=e;
});b.data={allowScroll:false};a.fromTemplateUrl("image-modal.html",{scope:b,animation:"slide-in-up"}).then(function(e){b.modal=e;});b.openModal=function(e){c.pages(e).then(function(g){var f=Array();
for(var h=0;h<g.length;h++){f.push({src:g[h].pagina,});}b.aImages=f;d.slide(0);b.modal.show();});};b.closeModal=function(){b.modal.hide();};b.$on("$destroy",function(){b.modal.remove();
});b.$on("modal.hide",function(){});b.$on("modal.removed",function(){});b.$on("modal.shown",function(){});b.next=function(){d.next();};b.previous=function(){d.previous();
};b.goToSlide=function(e){b.modal.show();d.slide(e);};b.slideChanged=function(e){b.slideIndex=e;};}]);