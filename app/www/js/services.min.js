angular.module("starter.services",[]).service("LoginService",function(a,c){var b=JSON.parse(localStorage.getItem("app")||"{}");return{loginUser:function(e,f){var d=a.defer();
var h=d.promise;var g={method:"POST",url:b.controller+"login.php",headers:{"Content-Type":" application/json "},params:{user:e,password:f,devicetoken:localStorage.getItem("devicetoken")}};
c(g).then(function(j){if(j.data[0]===true){localStorage.setItem("user",JSON.stringify(j.data[1]));d.resolve();}else{d.reject();}});h.success=function(j){h.then(j);
return h;};h.error=function(j){h.then(null,j);return h;};return h;}};}).service("news",function(e){var b=JSON.parse(localStorage.getItem("user")||"{}");
var d=JSON.parse(localStorage.getItem("app")||"{}");var a=b.idUsuario;var c={all:function(){var f={method:"POST",url:d.controller+"news.php",headers:{"Content-Type":" application/json "},params:{reciver:a,mode:"news"}};
var g=e(f).then(function(h){return h.data;});return g;},get:function(h){var f={method:"POST",url:d.controller+"news.php",headers:{"Content-Type":" application/json "},params:{nevv:h,mode:"new"}};
var g=e(f).then(function(j){return j.data[0];});return g;},view:function(f){var g={method:"POST",url:d.controller+"new.php",headers:{"Content-Type":" application/json "},params:{user:f.user,nevv:f.nevv}};
var h=e(g).then(function(j){return j.data;});return h;}};return c;}).service("magazines",function(e){var a=JSON.parse(localStorage.getItem("user")||"{}");
var d=JSON.parse(localStorage.getItem("app")||"{}");var b=a.idInstitucion;var c={all:function(){var f={method:"POST",url:d.controller+"magazines.php",headers:{"Content-Type":" application/json "},params:{institution:b,mode:"magazines"}};
var g=e(f).then(function(h){return h.data;});return g;},pages:function(h){var f={method:"POST",url:d.controller+"magazines.php",headers:{"Content-Type":" application/json "},params:{magazine:h,mode:"pages"}};
var g=e(f).then(function(j){return j.data;});return g;},view:function(f){var g={method:"POST",url:d.controller+"new.php",headers:{"Content-Type":" application/json "},params:{user:f.user,nevv:f.nevv}};
var h=e(g).then(function(j){return j.data;});return h;}};return c;}).service("events",function(e){var b=JSON.parse(localStorage.getItem("user")||"{}");
var d=JSON.parse(localStorage.getItem("app")||"{}");var a=b.idUsuario;var c={calender:function(){var f={method:"POST",url:d.controller+"events.php",headers:{"Content-Type":" application/json "},params:{reciver:a,mode:"app-calender"}};
var g=e(f).then(function(j){var l=[];for(var k=0;k<j.data.length;k++){var h=j.data[k]["fechaInicio"].split("-");l.push({date:new Date(parseInt(h[0]),(parseInt(h[1])-1),parseInt(h[2]))});
}localStorage.removeItem("events");localStorage.setItem("events",JSON.stringify(l));});},date:function(g){var f={method:"POST",url:d.controller+"events.php",headers:{"Content-Type":" application/json "},params:{reciver:a,dateevent:g,mode:"app-date"}};
var h=e(f).then(function(j){return j.data;});return h;},eventId:function(h){var f={method:"POST",url:d.controller+"events.php",headers:{"Content-Type":" application/json "},params:{reciver:a,even:h,mode:"app-id"}};
var g=e(f).then(function(j){return j.data;});return g;}};return c;}).service("sons",function(e){var b=JSON.parse(localStorage.getItem("user")||"{}");var d=JSON.parse(localStorage.getItem("app")||"{}");
var a=b.idUsuario;var c={all:function(){var f={method:"POST",url:d.controller+"sons.php",headers:{"Content-Type":" application/json "},params:{user:a}};
var g=e(f).then(function(h){return h.data;});return g;}};return c;}).service("honors",function(c){var b=JSON.parse(localStorage.getItem("app")||"{}");var a={get:function(f){var d={method:"POST",url:b.controller+"honors.php",headers:{"Content-Type":" application/json "},params:{user:f}};
var e=c(d).then(function(g){return g.data;});return e;}};return a;}).service("institutions",function(c){var b=JSON.parse(localStorage.getItem("app")||"{}");
var a={get:function(f){var d={method:"POST",url:b.controller+"institutions.php",headers:{"Content-Type":" application/json "},params:{institution:f}};var e=c(d).then(function(g){return g.data;
});return e;}};return a;}).service("users",function(e){var c=JSON.parse(localStorage.getItem("app")||"{}");var b=JSON.parse(localStorage.getItem("user")||"{}");
var a=b.idUsuario;var d={contacts:function(){var f={method:"POST",url:c.controller+"users.php",headers:{"Content-Type":" application/json "},params:{institution:b.idInstitucion,mode:"users",user:a}};
var g=e(f).then(function(h){return h.data;});return g;},get:function(h){var f={method:"POST",url:c.controller+"users.php",headers:{"Content-Type":" application/json "},params:{user:h,mode:"user"}};
var g=e(f).then(function(j){return j.data;});return g;}};return d;}).service("chats",function(e){var b=JSON.parse(localStorage.getItem("user")||"{}");var c=JSON.parse(localStorage.getItem("app")||"{}");
var a=b.idUsuario;var d={all:function(){var f={method:"POST",url:c.controller+"chats.php",headers:{"Content-Type":" application/json "},params:{user:a,mode:"app-all"}};
var g=e(f).then(function(h){return h.data;});return g;},get:function(h){var f={method:"POST",url:c.controller+"messages.php",headers:{"Content-Type":" application/json "},params:{conversation:h,mode:"conversation"}};
var g=e(f).then(function(j){return j.data;});return g;},remove:function(f){console.log(f);for(i=f.length-1;i>=0;i--){console.log(f[i].field);if(f[i].field=="money"){f.splice(i,1);
}}}};return d;}).service("respuesta",function(c){var b=JSON.parse(localStorage.getItem("app")||"{}");var a={create:function(d){var e={method:"POST",url:b.controller+"respuesta.php",headers:{"Content-Type":" application/json "},params:{response:d.response,user:d.user,nevv:d.nevv}};
var f=c(e).then(function(g){return g.data;});return f;},};return a;}).service("mensaje",function(c){var b=JSON.parse(localStorage.getItem("app")||"{}");
var a={create:function(d){var e={method:"POST",url:b.controller+"mensaje.php",headers:{"Content-Type":" application/json "},params:{message:d.message,reciver:d.reciver,transmitter:d.transmitter,conversation:d.conversation,institution:d.institution,mode:"create"}};
var f=c(e).then(function(g){return g.data;});return f;},view:function(d){var e={method:"POST",url:b.controller+"mensaje.php",headers:{"Content-Type":" application/json "},params:{reciver:d.reciver,conversation:d.conversation,mode:"view"}};
var f=c(e).then(function(g){return g.data;});return f;},kill:function(d){var e={method:"POST",url:b.controller+"mensaje.php",headers:{"Content-Type":" application/json "},params:{conversation:d.conversation,mode:"remove"}};
var f=c(e).then(function(g){return g.data;});return f;}};return a;}).service("Navigation",function(a){this.goNative=function(b,c,d){a.go(b,c);window.plugins.nativepagetransitions.slide({direction:d},function(e){console.log("success: "+e);
},function(e){alert("error: "+e);});};});